<!DOCTYPE html>
<html>
<head>
<style>
div.container {
	width: 100%;
	height: 100%;
	border: 1px solid gray;
}

header, footer {
	padding: 1em;
	color: white;
	background-color: red;
	clear: left;
	text-align: center;
}

section {
	margin-left: 160px;
	border-left: 1px solid gray;
	padding: 1em;
	overflow: hidden;
}
</style>
</head>
<body>
<%@ page language="java" %>
 <%@ page import="java.sql.*" %>
         <%@ page import="java.sql.DriverManager.*" %>
         
	<div class="container">

		<header>
			<tr>
				<td width="205" height="89"><img src="logo.png" width="251"
					height="88" alt="Logo" />
					<hr /></td>
				<td width="713" class="right">Welcome to CP shopping | <a
					href="index.jsp">Home</a> | <%
					if (session.getAttribute("uname") == null) {
				%> <a href="login.jsp">Login</a> | <a href="register.jsp">Signup</a>
					| <a href="showCart.jsp">ShoppingCart</a> <%
 	} else {
 %> <a href="logout.jsp">Logout</a> <%
 	}
 %>
				</td>
			</tr>
			<tr>
				<td><form id="form1" name="form1" method="post"
						action="search.jsp">
						<input name="search" type="text" id="search" size="60" /> <label>
							<input type="submit" name="submit" id="button" value="Search" />
						</label>
					</form></td>
			</tr>
		</header>



		<section>
			<%
				String pid = null;
				String category = request.getParameter("category");
				
				
				PreparedStatement ps;
				Connection con;
				ResultSet rs = null, rs1 = null, rs2 = null;
				Class.forName("com.mysql.jdbc.Driver");
				con = DriverManager.getConnection("jdbc:mysql://cosc304.ok.ubc.ca/db_kvankes", "kvankes", "37845138");

				Statement st = con.createStatement();
				if (category == "Mouse")
					;
				{
					ps = con.prepareStatement("select product.id, product.name, product.price from product where category=?");
					ps.setString(1, category);
				}

				rs = ps.executeQuery();
			%>
			<p>
			<table width="992" height="179" border="1">

				<%
					while (rs.next()) {
				%>
				<tr>
					<td width="185" height="173" class="center1">
						<%
							pid = rs.getString(1);
								ps = con.prepareStatement("select image from product where product.id=?");
								ps.setString(1, pid);
								rs1 = ps.executeQuery();
								while (rs1.next()) {
						%>
						<table width="120" height="133" border="0" align="center">
							<tr>
								<td><form action="productDetail.jsp">
										<input type="hidden" name="product"
											value=<%=rs1.getString(1)%>> <input name="buy"
											type="image" value="Image" src=<%=rs1.getString(7)%>
											width="73" height="105">
									</form></td>
							</tr>
							<%
								}
							%>
						</table> <%
 	ps = con.prepareStatement("select product.id, product.name, product.price from product where product.id=?");
 		ps.setString(1, pid);
 		rs2 = ps.executeQuery();
 		while (rs2.next()) {
 %>


					</td>
					<td width="791">
						<p><%=rs2.getString(1)%></p>
						<p>	<%=rs2.getString(4)%></p>
						<p><%=rs2.getString(2)%></p>
						<%
							}
						%></td>
				</tr>
				<%
					}
				%>




			</table>

			</p>

		</section>

		<footer>Copyright &copy; CP.com</footer>

	</div>

</body>
</html>
